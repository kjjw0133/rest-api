### 실행 방법,설정
1. 소스코드만 공개 된다는 가정하고 설명,델파이에서 VCL, DB는 mysql을 사용, mysql libmysql.dll파일 설치 해야지 db랑 연결
2. db와 연결되었으면 소스코드를 전부 복사해서 Project1에 넣기, Project2를 만든 후 Server를 넣어줌
3. 실행하기 전 Project -> options -> Application -> Froms -> Auto-create forms(Form1,2,3,4,5,6,7,8), Availabel forms(Form9,10,11)을 넣고 저장
4. 서버가 있는 Project.exe 파일을 Run으로 실행, 그리고 클라이언트(Form1)가 있는 Project.exe을 Run Without Debugging
---

### chat 
1. 로그인 중복 방지 처리
2. 비밀번호 찾기(이메일 인증) 구현
3. 소켓 통신
4. 방 생성(비밀,공개)
5. 메인에서 속해있는 채팅방 바로 입장
6. 채팅 창 위치와 색을 다르게하여 상대방과 나의 채팅을 구분하기 편하게 함
7. 채팅방 처음 입장 시 메시지를 입장한 본인을 제외한 채팅방에 있는 모두에게 전송, 퇴장도 같은 동작 (12/01 추가)

------

#### 수정 완료
1. 인원수 변경
+ 기존 방식 : 사용자가 직접 채팅방을 생성할 때 인원수를 지정하는 방식(직접 사용자가 들어가지 않아도 지정하기만 하면 그 값이 인원수로 표기되었음, 이 방식은 친구추가 기능을 추가하면 방을 생성할 떄 친구를 초대해서 몇명을 초대했는지에 따라서 인원수를 지정하면 될것같다)
+ 수정한 방식 : 채팅방에 있는 유저의 수를 쿼리로 몇명인지 확인하고 그 수를 보여주는 방식

2. 방생성 인원수 지정 제거
+ 방생성 폼에서는 방이름, 공개방,비밀방 선택만 가능

3. 메인 폼에서 방 번호, 비번을 입력하고 들어가는 버튼에 로그인 상태를 확인하는 장치를 1개더 추가로 만들었음, 이제 chatPanelClick에서 들어가는 것에 로그인 여부를 한번더 확인하여 버그가 발생했을 떄도 채팅방에 입장하지 못하도록 구현 중

4. 테스트 중 원래 있던 방의 이름으로 방 생성을 하면 방은 생성되지만 이동하는 위치는 원래 있던 방으로 이동
   + 문제 발생 이유 : 쿼리에서 채팅방 id를 구분하는 기준을 채팅방 이름으로 쿼리를 짜서 채팅방 id가 2개가 나오니 첫번째에 나오는 id를 가져와 호출하여 이런 현상이 발생,
   + 해결 방법 
      + 채팅방을 생설할 때 시간을 데이터 베이스에 저장하고 최근에 생성된 채팅방 id를 가져오는 방식
      + 채팅방을 생성할 떄 이름이 돌일한 채팅방이 이미 있으면 생성하지 못하도록 막는 방법(사용)

5. 방 생성 후 채팅을 치지 않고 채팅방을 나가면 채팅방을 삭제

6. 방 생성 후 채팅을 치면 날짜가 나오지 않는 현상 발생
+ if (todayCount = 0) and (LastDisplayedDate <> TodayStr) then 이런식으로 변경했는데 day 값이 전부 null 인데 값을 출력해주자 않아서 and 부터 삭제함,                          

7. 메인 화면의 버튼이 로그아웃을 한 후 버튼이 비황성화 되어야하는데 안되어서 로그인 상태를 체크하여 로그인 상태가 아니라면 메시지가 뜨며 기능을 사용하지 못하도록 함

8. 테스트 중 다른 채팅방은 날짜가 정상적으로 하루에 1개만 나오는데 채팅방 1개가 채팅을 칠때마다 날짜도 같이 출력되는 중, 현재 날짜와 db에 있는 날짜를 비교해서 공백이 있으면 날짜를 출려하는 방식인데 값을 데이터베이스에서 봐보니 null이 맨위에 값에 있어서 오류가 있는 것 같음, select 값을 전부 본다음 오늘 날짜와 일치하는 값이 있으면 출력하지 않는 방식으로 수정
   + 발생이유 : 다른 채팅방의 day는 맨 앞에 있는 값이 숫자 값인데, 이 채팅방은 테스트를 할 때 day에 null이 처음으로 들어가서 쿼리에서 여러 컬럼을 뽑지만 첫번째에 있는 쿼리 값이 null이 니까 값이 없는 건줄 알고 채팅을 칠때마다 날짜를 출력하고 있음,
   + 해결 방법 : select에서 가져온 값이 전부 null 이면 출력, yyyy-mm-dd 같이 문자 값이 있으면 오늘 날짜가 출력이 안되었다면 날짜 출력, 이미 출력이 되어있으면 출력 x
   + 마지막 표시날짜와 다르고 오늘 날짜와 같은 값이 없으면 출력
--- 

#### 오류
+ 가끔가다 로그아웃을 해도 메인 폼에 있는 Panel이 사라지지 않는 오류가 있음, 그 상태에서 채팅방에 들어가서 채팅을 치니 일단 친 채팅의 유저 이름은 없었음, DB에는 내가 로그아웃 하기 전 로그인한 계정으로 채팅을 쳤다고 나오고, 서버에서는 아무 이름도 나오지 않음, 서버에서는 누가 채팅을 했는지 표시가 안되고 있는데 DB에서는 로그아웃 전에 로그인한 계정으로 나옴,
     + 발생 원인 : 메인창을 새로 고침 할때 로그아웃을 하면 새로고침 결과를 로그아웃 전에 반영하여서 이런 결과가 나오는 것 같음
<img width="601" height="429" alt="image" src="https://github.com/user-attachments/assets/8644a3cb-86ec-4d31-a47c-b5b5ec8aa66a" />
<img width="737" height="38" alt="image" src="https://github.com/user-attachments/assets/3a9558f5-f2f9-4418-801a-ddca7df79a4c" />

---


##### 테스트 주의 사항 
1. 로그인을 하고 로그아웃을 하지않고 프로그램을 종료하면 user 테이블에 is_logged_in이 1로 되어있어서 이미 로그인 되었습니다. 라고 나오니 로그아웃을 잘 누르거나, 직접 sql에서 is_logged_in을 0으로 변경

---

### rest api 
1. 사용자 생성,조회,삭제,수정 등 기능을 URL을 호출하면 바로 실행되도록 만들었음
